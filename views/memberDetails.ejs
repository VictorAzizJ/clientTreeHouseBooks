<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Member Details</title>
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet" />
</head>
<body>
  <div class="container mt-5">
    <h1>Member: <%= member.firstName %> <%= member.lastName %></h1>
    <p><strong>Email:</strong> <%= member.email %></p>
    <p><strong>Phone:</strong> <%= member.phone || 'N/A' %></p>
    <p><strong>Address:</strong> <%= member.address || 'N/A' %></p>
    <p><strong>Joined:</strong> <%= member.joinedAt.toLocaleDateString() %></p>

    <h2 class="mt-4">Checkout History</h2>
    <% if (history.length === 0) { %>
      <p>No checkouts yet.</p>
    <% } else { %>
      <table class="table">
        <thead>
          <tr>
            <th>Book</th>
            <th>Checked Out</th>
            <th>Due On</th>
            <th>Returned On</th>
          </tr>
        </thead>
        <tbody>
          <% history.forEach(c => { %>
            <tr>
              <td><%= c.bookTitle %></td>
              <td><%= new Date(c.checkoutOn).toLocaleDateString() %></td>
              <td><%= new Date(c.dueOn).toLocaleDateString() %></td>
              <td>
                <% if (c.returnedOn) { %>
                  <%= new Date(c.returnedOn).toLocaleDateString() %>
                <% } else { %>
                  <em>Not returned</em>
                <% } %>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>

    <a href="/members" class="btn btn-primary me-2">Back to Member List</a>
    <a href="/dashboard" class="btn btn-secondary">Back to Dashboard</a>
  </div>
</body>
</html>

